/* FeedEk jQuery RSS/ATOM Feed Plugin v2.0
 * http://jquery-plugins.net/FeedEk/FeedEk.html
 * https://github.com/enginkizil/FeedEk
 * Author : Engin KIZIL http://www.enginkizil.com
 *
 * Custom build by Triangle717 <http://Triangle717.WordPress.com/> to merge
 * @enginkizil/FeedEk#5 <https://github.com/enginkizil/FeedEk/issues/5/>
 * @enginkizil/FeedEk#12 <https://github.com/enginkizil/FeedEk/pull/12/>
 * @enginkizil/FeedEk#24 <https://github.com/enginkizil/FeedEk/pull/24/>
 * In addition to manual patches
*/

(function(n){n.fn.FeedEk=function(t){var i=n.extend({FeedUrl:"",MaxCount:5,ShowDesc:!0,ShowPubDate:!0,CharacterLimit:0,TitleLinkTarget:"_blank",DateFormat:"",DateFormatLang:"en"},t),f=n(this).attr("id"),r="",u;n("#"+f).empty().append('<img src="loader.gif" />');n.ajax({url:"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+i.MaxCount+"&output=json&q="+encodeURIComponent(i.FeedUrl)+"&hl=en&callback=?",dataType:"json",success:function(t){n("#"+f).empty();n.each(t.responseData.feed.entries,function(t,f){if(r+='<li><div class="itemTitle"><a href="'+f.link+'" target="'+i.TitleLinkTarget+'" >'+f.title+"<\/a><\/div>",i.ShowPubDate)if(u=new Date(f.publishedDate),n.trim(i.DateFormat).length>0)try{moment.lang(i.DateFormatLang);r+='<div class="itemDate">'+moment(u).format(i.DateFormat)+"<\/div>"}catch(t){r+='<div class="itemDate">'+u.toLocaleDateString()+"<\/div>"}else r+='<div class="itemDate">'+u.toLocaleDateString()+"<\/div>";i.ShowDesc&&(f.content=f.content.replace(/<(script|img|embed|object|applet|iframe|a|b|i|u|em|strong)[^>]*>/gi,""),r+=i.DescCharacterLimit>0&&f.content.length>i.DescCharacterLimit?'<div class="itemContent">'+f.content.substr(0,i.DescCharacterLimit)+"...<\/div>":'<div class="itemContent">'+f.content+"<\/div>");r+="<\/li>"});n("#"+f).append('<ul class="feedEkList">'+r+"<\/ul>")}})}})(jQuery);
