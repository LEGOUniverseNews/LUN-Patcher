/* LUN-Patcher v2.3.0
 * http://LEGOUniverseNews.forummotion.com/
 * Created 2013-2015 Triangle717 and rioforce
 * Licensed under the MIT License
 */
!function(a){"use strict";function b(a,b,c,d){this.id="post-"+a.toString(),this.url=c,this.title=b,this.summary=d,this.selector=".post-single#"+this.id,this.container='<div class="post-single" id="'+this.id+'"></div>'}function c(){var b=a("#news-feed");return d.forEach(function(c){b.append(c.container),a(c.selector).append("<a class='post-url post-title' target='_blank' href='#'></a>"),a(c.selector).append("<div class='post-summary'></div>"),a(c.selector+" .post-title").html(c.title),a(c.selector+" .post-url").attr("href",c.url),a(c.selector+" .post-summary").html(c.summary)}),!0}b.prototype.charLimit=170,b.prototype.summarize=function(){var a=/<(?!\/??(?:p|div)).+?>/gi;this.summary=this.summary.replace(a,""),this.title=this.title.replace(a,""),/reblogged-content/.test(this.summary)&&(this.summary=this.summary.slice(this.summary.indexOf("reblogged-content")+20),this.summary.replace(/<\/div><p class="reblog-source">View original<\/p><\/div><\/div>/,""));var b=this.charLimit,c=/[.?;:!]/;if(!c.test(this.summary.charAt(b)))for(;!c.test(this.summary.charAt(b));)b+=1;return this.summary=this.summary.substr(0,b)+"...",!0};var d=[],e=6;a.ajax({dataType:"json",url:"//public-api.wordpress.com/rest/v1/sites/legouniversenews.wordpress.com/posts/?number="+e+"&callback=?",success:[function(a){a.posts.forEach(function(a){var c=new b(a.ID,a.title,a.short_URL,a.content);c.summarize(),d.push(c)})},c],error:function(){var b="<p>The news feed could not be loaded. Please visit the <a style='color: #CEC2C2;' href='https://legouniversenews.wordpress.com' target='_blank'>LEGO Universe News!</a> blog directly.</p>";a("#news-feed").html(b)}})}(jQuery);