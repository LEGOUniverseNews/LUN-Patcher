/* LUN-Patcher v2.1.0
 * http://legouniversenews.forummotion.com/
 * Created 2013-2014 Triangle717 and rioforce
 * Licensed under the The MIT License
 */
!function(a){"use strict";function b(a,b,c,d){this.url=c,this.title=b,this.summary=d,this.selector=".post-single#"+a,this.container='<div class="post-single" id="'+a+'"></div>'}function c(){var b=a("#news-feed");return d.forEach(function(c){b.append(c.container),a(c.selector).append("<a class='post-url post-title' target='_blank' href='#'></a>"),a(c.selector).append("<div class='post-summary'></div>"),a(c.selector+" .post-title").html(c.title),a(c.selector+" .post-url").attr("href",c.url),a(c.selector+" .post-summary").html(c.summary)}),!0}b.prototype.charLimit=170,b.prototype.summarize=function(){var a=/<(?!\/?(?:p|div)).+?>/gi;this.summary=this.summary.replace(a,""),this.title=this.title.replace(a,"");var b=this.charLimit;if(" "!==this.summary.charAt(b))for(;" "!==this.summary.charAt(b);)b+=1;return this.summary=this.summary.substr(0,b)+"...",!0};var d=[],e=6;a.ajax({dataType:"json",url:"//public-api.wordpress.com/rest/v1/sites/legouniversenews.wordpress.com/posts/?number="+e+"&callback=?",success:[function(a){console.log("Fetching news feed from LEGOUniverseNews.WordPress.com"),a.posts.forEach(function(a){var c="post-"+a.guid.substr(-4),e=new b(c,a.title,a.short_URL,a.content);e.summarize(),d.push(e)})},c],error:function(){var b="<p>The news feed could not be loaded. Please visit the <a style='color: #CEC2C2;' href='https://legouniversenews.wordpress.com' target='_blank'>LEGO Universe News!</a> blog directly.</p>";a("#news-feed").html(b)}})}(jQuery);